"""
================================
Simple OpenFPGA bitstream parser
================================


"""
from spydrnet_physical.util import BitstreamManager
import xml.etree.ElementTree as etree
from pprint import pprint


def main():
    project_dir = "../homogeneous_fabric/FPGA44_bitstreams"
    benchmark = "top"
    fabric_key = f"{project_dir}/fabric_key_output.xml"
    bitstream_file = f"{project_dir}/{benchmark}/fabric_bitstream.xml"

    bitstream = BitstreamManager(fabric_key, bitstream_file)

    bitstream.print_bitstream_of_module("grid_clb", value="hex")
    bitstream.get_module_elements("grid_clb")
    bitstream.create_fabric_bitstream("_sample_independent_bitstream.xml")


if __name__ == "__main__":
    main()

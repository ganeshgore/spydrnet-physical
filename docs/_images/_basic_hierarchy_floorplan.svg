<?xml version="1.0" encoding="utf-8" ?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink" baseProfile="full" height="100%" version="1.1" viewBox="-50,-350,350,350" width="100%">
    <defs>
        <style type="text/css"><![CDATA[
            text{font-family: LATO; font-weight: 800; font-size: 5px;}
            .module_boundary{fill:#f4f0e6}
            .left_pin{
                fill:blue;
                text-anchor: start;
                transform: translate(5px, 00px) scale(1,-1);}
            .right_pin{
                fill:blue;
                text-anchor: end;
                transform: translate(-5px, 00px) scale(1,-1);}
            .bottom_pin{
                fill:blue;
                transform-box: fill-box;
                transform-origin: start;
                text-anchor: start;
                transform: translate(0px, 10px) rotate(90deg) scale(1,-1);}
            .top_pin{
                fill:blue;
                transform-box: fill-box;
                transform-origin: bottom left;
                text-anchor: start;
                transform: translate(0px, -3px) rotate(-90deg) scale(1,-1);}
            .in_pin{fill: red;}
            .out_pin{fill: blue;}
        ]]></style>
        <symbol id="top">
            <rect class="module_boundary" fill="white" height="249" stroke="grey" stroke-width="2" width="249" x="1" y="1"/>
            <rect class="module_pin in_pin" height="4" onmousemove="showTooltip(evt, 'in0');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="0.0" y="8.0"/>
            <text class="pin left_pin" x="0.0" y="-8.0">in0</text>
            <rect class="module_pin in_pin" height="4" onmousemove="showTooltip(evt, 'in1');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="0.0" y="28.0"/>
            <text class="pin left_pin" x="0.0" y="-28.0">in1</text>
            <rect class="module_pin in_pin" height="4" onmousemove="showTooltip(evt, 'bus_in');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="0.0" y="48.0"/>
            <text class="pin left_pin" x="0.0" y="-48.0">bus_in</text>
            <rect class="module_pin out_pin" height="4" onmousemove="showTooltip(evt, 'out0');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="247.0" y="228.0"/>
            <text class="pin right_pin" x="247.0" y="-228.0">out0</text>
            <rect class="module_pin out_pin" height="4" onmousemove="showTooltip(evt, 'bus_out');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="247.0" y="208.0"/>
            <text class="pin right_pin" x="247.0" y="-208.0">bus_out</text>
        </symbol>
        <symbol id="module1">
            <rect class="module_boundary" fill="white" height="49" stroke="grey" stroke-width="2" width="49" x="1" y="1"/>
            <rect class="module_pin in_pin" height="4" onmousemove="showTooltip(evt, 'in0');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="0.0" y="8.0"/>
            <text class="pin left_pin" x="0.0" y="-8.0">in0</text>
            <rect class="module_pin in_pin" height="4" onmousemove="showTooltip(evt, 'in1');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="0.0" y="28.0"/>
            <text class="pin left_pin" x="0.0" y="-28.0">in1</text>
            <rect class="module_pin out_pin" height="4" onmousemove="showTooltip(evt, 'out');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="47.0" y="28.0"/>
            <text class="pin right_pin" x="47.0" y="-28.0">out</text>
        </symbol>
        <symbol id="module2">
            <rect class="module_boundary" fill="white" height="49" stroke="grey" stroke-width="2" width="49" x="1" y="1"/>
            <rect class="module_pin in_pin" height="4" onmousemove="showTooltip(evt, 'in0');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="0.0" y="8.0"/>
            <text class="pin left_pin" x="0.0" y="-8.0">in0</text>
            <rect class="module_pin in_pin" height="4" onmousemove="showTooltip(evt, 'in1');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="0.0" y="28.0"/>
            <text class="pin left_pin" x="0.0" y="-28.0">in1</text>
            <rect class="module_pin out_pin" height="4" onmousemove="showTooltip(evt, 'out');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="47.0" y="28.0"/>
            <text class="pin right_pin" x="47.0" y="-28.0">out</text>
        </symbol>
    </defs>
    <g id="bg">
        <rect fill="#FFF" height="300" id="background" stroke-width="0" width="300" x="-25" y="-25"/>
    </g>
    <g id="mainframe">
        <g id="mainShapes" transform="scale(1,-1)">
            <use class="topModule" x="0" xlink:href="#top" y="0"/>
            <use class="inst_1_0" x="50" xlink:href="#module1" y="50"/>
            <use class="inst_1_1" x="50" xlink:href="#module1" y="150"/>
            <use class="inst_2_0" x="150" xlink:href="#module2" y="50"/>
            <use class="inst_2_1" x="150" xlink:href="#module2" y="150"/>
        </g>
        <g id="mainText" transform="scale(1,-1)">
            <text alignment-baseline="middle" fill="black" text-anchor="middle" transform="scale(1,-1)" x="125.0" y="-25.0">top</text>
            <text alignment-baseline="middle" fill="black" text-anchor="middle" transform="scale(1,-1)" x="75.0" y="-70">inst_1_0</text>
            <text alignment-baseline="middle" fill="black" text-anchor="middle" transform="scale(1,-1)" x="75.0" y="-170">inst_1_1</text>
            <text alignment-baseline="middle" fill="black" text-anchor="middle" transform="scale(1,-1)" x="175.0" y="-70">inst_2_0</text>
            <text alignment-baseline="middle" fill="black" text-anchor="middle" transform="scale(1,-1)" x="175.0" y="-170">inst_2_1</text>
        </g>
        <g id="edges" transform="scale(1,-1)">
            <polyline class="edge" fill="none" onmousemove="showTooltip(evt, 'in0');" onmouseout="hideTooltip();" points="2,10 52,60 52,180 152,60" stroke="black" stroke-width="1"/>
            <polyline class="edge" fill="none" onmousemove="showTooltip(evt, 'in1');" onmouseout="hideTooltip();" points="2,30 52,80 152,60" stroke="black" stroke-width="1"/>
            <polyline class="edge" fill="none" onmousemove="showTooltip(evt, 'bus_in');" onmouseout="hideTooltip();" points="2,50 152,80" stroke="black" stroke-width="1"/>
            <polyline class="edge" fill="none" onmousemove="showTooltip(evt, 'out0');" onmouseout="hideTooltip();" points="249,230 99,180" stroke="black" stroke-width="1"/>
            <polyline class="edge" fill="none" onmousemove="showTooltip(evt, 'bus_out');" onmouseout="hideTooltip();" points="249,210 199,180" stroke="black" stroke-width="1"/>
            <polyline class="edge" fill="none" onmousemove="showTooltip(evt, 'wire0');" onmouseout="hideTooltip();" points="99,80 52,160" stroke="black" stroke-width="1"/>
            <polyline class="edge" fill="none" onmousemove="showTooltip(evt, 'wire_bus');" onmouseout="hideTooltip();" points="199,80 152,160 152,180" stroke="black" stroke-width="1"/>
        </g>
    </g>
</svg>

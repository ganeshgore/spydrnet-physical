<?xml version="1.0" encoding="utf-8" ?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" xmlns:xlink="http://www.w3.org/1999/xlink" baseProfile="full" height="100%" version="1.1" viewBox="-50,-350,350,350" width="100%">
    <defs>
        <symbol id="top">
            <rect class="module_boundary top" fill="#f4f0e6" height="249" width="249" x="1" y="1"/>
            <rect class="module_pin in_pin" height="4" onmousemove="showTooltip(evt, 'in0');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="0.0" y="8.0"/>
            <text class="pin left_pin" x="0.0" y="-8.0">in0</text>
            <rect class="module_pin in_pin" height="4" onmousemove="showTooltip(evt, 'in1');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="0.0" y="28.0"/>
            <text class="pin left_pin" x="0.0" y="-28.0">in1</text>
            <rect class="module_pin in_pin" height="4" onmousemove="showTooltip(evt, 'in3');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="123.0" y="123.0"/>
            <text class="pin []_pin" x="123.0" y="-123.0">in3</text>
            <rect class="module_pin in_pin" height="4" onmousemove="showTooltip(evt, 'bus_in');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="0.0" y="48.0"/>
            <text class="pin left_pin" x="0.0" y="-48.0">bus_in</text>
            <rect class="module_pin out_pin" height="4" onmousemove="showTooltip(evt, 'out0');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="247.0" y="228.0"/>
            <text class="pin right_pin" x="247.0" y="-228.0">out0</text>
            <rect class="module_pin out_pin" height="4" onmousemove="showTooltip(evt, 'bus_out');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="247.0" y="208.0"/>
            <text class="pin right_pin" x="247.0" y="-208.0">bus_out</text>
        </symbol>
        <symbol id="module1">
            <path class="module_boundary module1" d="M 25 0 v 25 h -25 v 25 h 25  v 25 h 25 v -25 h 25 v -25  h -25 v -25 Z Z" fill="#f4f0e6"/>
            <rect class="module_pin in_pin" height="4" onmousemove="showTooltip(evt, 'in0');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="48.0" y="58.0"/>
            <text class="pin top_pin right_pin" x="48.0" y="-58.0">in0</text>
            <rect class="module_pin in_pin" height="4" onmousemove="showTooltip(evt, 'in1');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="-2.0" y="33.0"/>
            <text class="pin left_pin center_pin" x="-2.0" y="-33.0">in1</text>
            <rect class="module_pin out_pin" height="4" onmousemove="showTooltip(evt, 'out');" onmouseout="hideTooltip();" stroke-width="0" width="4" x="73.0" y="43.0"/>
            <text class="pin right_pin center_pin" x="73.0" y="-43.0">out</text>
        </symbol>
        <symbol height="20" id="module2" viewBox="-10 0 30 20 " width="30">
            <path class="module_boundary module2" d="m 0 0 v 10 h -10 v 10 h 30 v -20 h -20  z" fill="#f4f0e6"/>
        </symbol>
        <style type="text/css"><![CDATA[
            .origin{fill:black}
            text{font-family: Verdana; font-size: 5px;}
            .module_boundary{stroke:grey; stroke-width:1;opacity: 0.8}
            .left_pin{
                fill:blue;
                text-anchor: start;
                transform: translate(5px, 00px) scale(1,-1);}
            .right_pin{
                fill:blue;
                text-anchor: end;
                transform: translate(-5px, 00px) scale(1,-1);}
            .bottom_pin{
                fill:blue;
                transform-box: fill-box;
                transform-origin: start;
                text-anchor: start;
                transform: translate(0px, 10px) rotate(90deg) scale(1,-1);}
            .top_pin{
                fill:blue;
                transform-box: fill-box;
                transform-origin: bottom left;
                text-anchor: start;
                transform: translate(0px, -3px) rotate(-90deg) scale(1,-1);}
            .in_pin{fill: red;}
            .out_pin{fill: blue;}
        ]]></style>
    </defs>
    <g id="bg">
        <rect fill="#FFF" height="300" id="background" stroke-width="0" width="300" x="-25" y="-25"/>
    </g>
    <g id="mainframe">
        <g id="mainShapes" transform="scale(1,-1)">
            <use class="topModule" x="0" xlink:href="#top" y="0"/>
            <use class="inst_1_0 module1" x="50" xlink:href="#module1" y="50"/>
            <use class="inst_1_1 module1" x="50" xlink:href="#module1" y="150"/>
            <use class="inst_2_0 module2" x="150" xlink:href="#module2" y="50"/>
            <use class="inst_2_1 module2" x="150" xlink:href="#module2" y="150"/>
        </g>
        <g id="mainText" transform="scale(1,-1)">
            <text alignment-baseline="middle" fill="black" text-anchor="middle" transform="scale(1,-1)" x="125.0" y="-25.0">top</text>
            <text alignment-baseline="middle" class="inst_1_0 module1" fill="black" text-anchor="middle" transform="scale(1,-1)" x="87.5" y="-87.5">
                inst_1_0
                <tspan dy="1.2em" x="87.5" y="-87.5">[module1]</tspan>
            </text>
            <text alignment-baseline="middle" class="inst_1_1 module1" fill="black" text-anchor="middle" transform="scale(1,-1)" x="87.5" y="-187.5">
                inst_1_1
                <tspan dy="1.2em" x="87.5" y="-187.5">[module1]</tspan>
            </text>
            <text alignment-baseline="middle" class="inst_2_0 module2" fill="black" text-anchor="middle" transform="scale(1,-1)" x="165.0" y="-60.0">
                inst_2_0
                <tspan dy="1.2em" x="165.0" y="-60.0">[module2]</tspan>
            </text>
            <text alignment-baseline="middle" class="inst_2_1 module2" fill="black" text-anchor="middle" transform="scale(1,-1)" x="165.0" y="-160.0">
                inst_2_1
                <tspan dy="1.2em" x="165.0" y="-160.0">[module2]</tspan>
            </text>
        </g>
        <g id="edges" transform="scale(1,-1)">
            <polyline class="edge" fill="none" onmousemove="showTooltip(evt, 'in0');" onmouseout="hideTooltip();" points="2,10 100,110 150,50" stroke="black" stroke-width="1"/>
            <polyline class="edge" fill="none" onmousemove="showTooltip(evt, 'in1');" onmouseout="hideTooltip();" points="2,30 50,85 150,50" stroke="black" stroke-width="1"/>
            <polyline class="edge" fill="none" onmousemove="showTooltip(evt, 'in3');" onmouseout="hideTooltip();" points="125,125 50,185" stroke="black" stroke-width="1"/>
            <polyline class="edge" fill="none" onmousemove="showTooltip(evt, 'bus_in');" onmouseout="hideTooltip();" points="2,50 150,50" stroke="black" stroke-width="1"/>
            <polyline class="edge" fill="none" onmousemove="showTooltip(evt, 'out0');" onmouseout="hideTooltip();" points="249,230 125,195" stroke="black" stroke-width="1"/>
            <polyline class="edge" fill="none" onmousemove="showTooltip(evt, 'bus_out');" onmouseout="hideTooltip();" points="249,210 150,150" stroke="black" stroke-width="1"/>
            <polyline class="edge" fill="none" onmousemove="showTooltip(evt, 'wire0');" onmouseout="hideTooltip();" points="125,95 100,210" stroke="black" stroke-width="1"/>
            <polyline class="edge" fill="none" onmousemove="showTooltip(evt, 'wire_bus');" onmouseout="hideTooltip();" points="150,50 150,150 150,150" stroke="black" stroke-width="1"/>
        </g>
    </g>
    <rect class="origin" height="10" width="10" x="0" y="0"/>
</svg>

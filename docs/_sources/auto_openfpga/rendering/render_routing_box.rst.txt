
.. DO NOT EDIT.
.. THIS FILE WAS AUTOMATICALLY GENERATED BY SPHINX-GALLERY.
.. TO MAKE CHANGES, EDIT THE SOURCE PYTHON FILE:
.. "auto_openfpga/rendering/render_routing_box.py"
.. LINE NUMBERS ARE GIVEN BELOW.

.. only:: html

    .. note::
        :class: sphx-glr-download-link-note

        Click :ref:`here <sphx_glr_download_auto_openfpga_rendering_render_routing_box.py>`
        to download the full example code

.. rst-class:: sphx-glr-example-title

.. _sphx_glr_auto_openfpga_rendering_render_routing_box.py:


=====================
Rendering Switch Box
=====================

This example demostrate how a switch box (SB) and connection box (CB)
can be rendered in a SVG format.

**Full Switch Box [ SB_1__1_ ]**

.. image:: ../../../../examples/OpenFPGA/rendering/_sb_1__1_.svg
    :width: 500px
    :align: center

**Horizontal Connection Box**

.. image:: ../../../../examples/OpenFPGA/rendering/_cbx_1__1_.svg
    :width: 150px
    :align: center

**Vertical Connection Box**

.. image:: ../../../../examples/OpenFPGA/rendering/_cbx_1__2_.svg
    :width: 800px
    :align: center

**Arbitrary arrangement of vertical connection box channels and pins**

.. image:: ../../../../examples/OpenFPGA/rendering/_cbx_1__1_arrangement.svg
    :width: 800px
    :align: center

.. GENERATED FROM PYTHON SOURCE LINES 34-119




.. rst-class:: sphx-glr-script-out

 Out:

 .. code-block:: none

    ================================================================================================================================================================
             module  chanx_l  chanx_r  chany_t  chany_b   ipin_t   ipin_b   ipin_r   ipin_l          opin_l          opin_r          opin_t          opin_b
    ================================================================================================================================================================
           sb_1__1_       20       20       20       20       10       10       10       10     5 [  5,  3]     5 [  2,  5]     5 [  5,  2]     5 [  5,  2]

     left incoming channels
    = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
    index   Mux                       ChanX                                         Chany                       OPIN_L     OPIN_R     OPIN_T     OPIN_B  
    = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
      1      12     _l___________l_____________l____________      _t_____t__b__t__________b__t________b_b_      x____      _____      _____      _____   
      3      0      _l______________________________________      ________________________________________      _____      _____      _____      _____   
      5      0      ___l____________________________________      ________________________________________      _____      _____      _____      _____   
      7      0      _____l__________________________________      ________________________________________      _____      _____      _____      _____   
      9      12     ___l_____________l___________l__________      b_____b____tb____________tb__________t_t      _x___      _____      _____      _____   
      11     0      _________l______________________________      ________________________________________      _____      _____      _____      _____   
      13     0      ___________l____________________________      ________________________________________      _____      _____      _____      _____   
      15     0      _____________l__________________________      ________________________________________      _____      _____      _____      _____   
      17     12     _____l_____________l_____________l______      __b______t____b_b____t______b__t___t____      __x__      _____      _____      _____   
      19     0      _________________l______________________      ________________________________________      _____      _____      _____      _____   
      21     0      ___________________l____________________      ________________________________________      _____      _____      _____      _____   
      23     0      _____________________l__________________      ________________________________________      _____      _____      _____      _____   
      25     12     _________l___________l_____________l____      ____bt____________bt__bt________bt______      ___x_      _____      _____      _____   
      27     0      _________________________l______________      ________________________________________      _____      _____      _____      _____   
      29     0      ___________________________l____________      ________________________________________      _____      _____      _____      _____   
      31     0      _____________________________l__________      ________________________________________      _____      _____      _____      _____   
      33     12     ___________l_____________l___________l__      ___t____b______t_t__b________tb___b_____      ____x      _____      _____      _____   
      35     0      _________________________________l______      ________________________________________      _____      _____      _____      _____   
      37     0      ___________________________________l____      ________________________________________      _____      _____      _____      _____   
      39     0      _____________________________________l__      ________________________________________      _____      _____      _____      _____   

     right incoming channels
    = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
    index   Mux                       ChanX                                         Chany                       OPIN_L     OPIN_R     OPIN_T     OPIN_B  
    = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
      0      12     r___________r_____________r_____________      ________b__t________b____t____b___b__t_t      _____      x____      _____      _____   
      2      0      r_______________________________________      ________________________________________      _____      _____      _____      _____   
      4      0      __r_____________________________________      ________________________________________      _____      _____      _____      _____   
      6      0      ____r___________________________________      ________________________________________      _____      _____      _____      _____   
      8      12     __r_____________r___________r___________      _t__b__t_____t____b___b____t____b_______      _____      _x___      _____      _____   
      10     0      ________r_______________________________      ________________________________________      _____      _____      _____      _____   
      12     0      __________r_____________________________      ________________________________________      _____      _____      _____      _____   
      14     0      ____________r___________________________      ________________________________________      _____      _____      _____      _____   
      16     12     ____r_____________r_____________r_______      __bt__________btbt__________bt__________      _____      __x__      _____      _____   
      18     0      ________________r_______________________      ________________________________________      _____      _____      _____      _____   
      20     0      __________________r_____________________      ________________________________________      _____      _____      _____      _____   
      22     0      ____________________r___________________      ________________________________________      _____      _____      _____      _____   
      24     12     ________r___________r_____________r_____      b____tb_____b______t___t__b______t______      _____      ___x_      _____      _____   
      26     0      ________________________r_______________      ________________________________________      _____      _____      _____      _____   
      28     0      __________________________r_____________      ________________________________________      _____      _____      _____      _____   
      30     0      ____________________________r___________      ________________________________________      _____      _____      _____      _____   
      32     12     __________r_____________r___________r___      _________tb__________t__b______t___tb_b_      _____      ____x      _____      _____   
      34     0      ________________________________r_______      ________________________________________      _____      _____      _____      _____   
      36     0      __________________________________r_____      ________________________________________      _____      _____      _____      _____   
      38     0      ____________________________________r___      ________________________________________      _____      _____      _____      _____   

     top incoming channels
    = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
    index   Mux                       ChanX                                         Chany                       OPIN_L     OPIN_R     OPIN_T     OPIN_B  
    = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
      0      12     r__l__r_____r__l_l________r__l__________      b___________b_____________b_____________      _____      _____      x____      _____   
      2      0      ________________________________________      b_______________________________________      _____      _____      _____      _____   
      4      0      ________________________________________      __b_____________________________________      _____      _____      _____      _____   
      6      0      ________________________________________      ____b___________________________________      _____      _____      _____      _____   
      8      12     _____l____r________l___lr________l__r_r_      __b_____________b___________b___________      _____      _____      _x___      _____   
      10     0      ________________________________________      ________b_______________________________      _____      _____      _____      _____   
      12     0      ________________________________________      __________b_____________________________      _____      _____      _____      _____   
      14     0      ________________________________________      ____________b___________________________      _____      _____      _____      _____   
      16     12     ________rl__________rl________rl__rl____      ____b_____________b_____________b_______      _____      _____      __x__      _____   
      18     0      ________________________________________      ________________b_______________________      _____      _____      _____      _____   
      20     0      ________________________________________      __________________b_____________________      _____      _____      _____      _____   
      22     0      ________________________________________      ____________________b___________________      _____      _____      _____      _____   
      24     12     ____r______l______r___r__l______r____l_l      ________b___________b_____________b_____      _____      _____      ___x_      _____   
      26     0      ________________________________________      ________________________b_______________      _____      _____      _____      _____   
      28     0      ________________________________________      __________________________b_____________      _____      _____      _____      _____   
      30     0      ________________________________________      ____________________________b___________      _____      _____      _____      _____   
      32     12     _lr____l_____lr_r__________lr___________      __________b_____________b___________b___      _____      _____      ____x      _____   
      34     0      ________________________________________      ________________________________b_______      _____      _____      _____      _____   
      36     0      ________________________________________      __________________________________b_____      _____      _____      _____      _____   
      38     0      ________________________________________      ____________________________________b___      _____      _____      _____      _____   

     bottom incoming channels
    = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
    index   Mux                       ChanX                                         Chany                       OPIN_L     OPIN_R     OPIN_T     OPIN_B  
    = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
      1      12     __r______l____r_r____l______r__l___l____      _t___________t_____________t____________      _____      _____      _____      x____   
      3      0      ________________________________________      _t______________________________________      _____      _____      _____      _____   
      5      0      ________________________________________      ___t____________________________________      _____      _____      _____      _____   
      7      0      ________________________________________      _____t__________________________________      _____      _____      _____      _____   
      9      12     ____rl____________rl__rl________rl______      ___t_____________t___________t__________      _____      _____      _____      _x___   
      11     0      ________________________________________      _________t______________________________      _____      _____      _____      _____   
      13     0      ________________________________________      ___________t____________________________      _____      _____      _____      _____   
      15     0      ________________________________________      _____________t__________________________      _____      _____      _____      _____   
      17     12     ___l____r______l_l__r________lr___r_____      _____t_____________t_____________t______      _____      _____      _____      __x__   
      19     0      ________________________________________      _________________t______________________      _____      _____      _____      _____   
      21     0      ________________________________________      ___________________t____________________      _____      _____      _____      _____   
      23     0      ________________________________________      _____________________t__________________      _____      _____      _____      _____   
      25     12     _l_____l__r__l__________r__l________r_r_      _________t___________t_____________t____      _____      _____      _____      ___x_   
      27     0      ________________________________________      _________________________t______________      _____      _____      _____      _____   
      29     0      ________________________________________      ___________________________t____________      _____      _____      _____      _____   
      31     0      ________________________________________      _____________________________t__________      _____      _____      _____      _____   
      33     12     r_____r____lr____________lr__________l_l      ___________t_____________t___________t__      _____      _____      _____      ____x   
      35     0      ________________________________________      _________________________________t______      _____      _____      _____      _____   
      37     0      ________________________________________      ___________________________________t____      _____      _____      _____      _____   
      39     0      ________________________________________      _____________________________________t__      _____      _____      _____      _____   

    left outgoing channels
    = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
    index   Mux                       ChanX                                         Chany                       OPIN_L     OPIN_R     OPIN_T     OPIN_B  
    = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
      1      12     _l___________l_____________l____________      _t_____t__b__t__________b__t________b_b_      x____      _____      _____      _____   
      3      0      _l______________________________________      ________________________________________      _____      _____      _____      _____   
      5      0      ___l____________________________________      ________________________________________      _____      _____      _____      _____   
      7      0      _____l__________________________________      ________________________________________      _____      _____      _____      _____   
      9      12     ___l_____________l___________l__________      b_____b____tb____________tb__________t_t      _x___      _____      _____      _____   
      11     0      _________l______________________________      ________________________________________      _____      _____      _____      _____   
      13     0      ___________l____________________________      ________________________________________      _____      _____      _____      _____   
      15     0      _____________l__________________________      ________________________________________      _____      _____      _____      _____   
      17     12     _____l_____________l_____________l______      __b______t____b_b____t______b__t___t____      __x__      _____      _____      _____   
      19     0      _________________l______________________      ________________________________________      _____      _____      _____      _____   
      21     0      ___________________l____________________      ________________________________________      _____      _____      _____      _____   
      23     0      _____________________l__________________      ________________________________________      _____      _____      _____      _____   
      25     12     _________l___________l_____________l____      ____bt____________bt__bt________bt______      ___x_      _____      _____      _____   
      27     0      _________________________l______________      ________________________________________      _____      _____      _____      _____   
      29     0      ___________________________l____________      ________________________________________      _____      _____      _____      _____   
      31     0      _____________________________l__________      ________________________________________      _____      _____      _____      _____   
      33     12     ___________l_____________l___________l__      ___t____b______t_t__b________tb___b_____      ____x      _____      _____      _____   
      35     0      _________________________________l______      ________________________________________      _____      _____      _____      _____   
      37     0      ___________________________________l____      ________________________________________      _____      _____      _____      _____   
      39     0      _____________________________________l__      ________________________________________      _____      _____      _____      _____   

    right outgoing channels
    = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
    index   Mux                       ChanX                                         Chany                       OPIN_L     OPIN_R     OPIN_T     OPIN_B  
    = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
      0      12     r___________r_____________r_____________      ________b__t________b____t____b___b__t_t      _____      x____      _____      _____   
      2      0      r_______________________________________      ________________________________________      _____      _____      _____      _____   
      4      0      __r_____________________________________      ________________________________________      _____      _____      _____      _____   
      6      0      ____r___________________________________      ________________________________________      _____      _____      _____      _____   
      8      12     __r_____________r___________r___________      _t__b__t_____t____b___b____t____b_______      _____      _x___      _____      _____   
      10     0      ________r_______________________________      ________________________________________      _____      _____      _____      _____   
      12     0      __________r_____________________________      ________________________________________      _____      _____      _____      _____   
      14     0      ____________r___________________________      ________________________________________      _____      _____      _____      _____   
      16     12     ____r_____________r_____________r_______      __bt__________btbt__________bt__________      _____      __x__      _____      _____   
      18     0      ________________r_______________________      ________________________________________      _____      _____      _____      _____   
      20     0      __________________r_____________________      ________________________________________      _____      _____      _____      _____   
      22     0      ____________________r___________________      ________________________________________      _____      _____      _____      _____   
      24     12     ________r___________r_____________r_____      b____tb_____b______t___t__b______t______      _____      ___x_      _____      _____   
      26     0      ________________________r_______________      ________________________________________      _____      _____      _____      _____   
      28     0      __________________________r_____________      ________________________________________      _____      _____      _____      _____   
      30     0      ____________________________r___________      ________________________________________      _____      _____      _____      _____   
      32     12     __________r_____________r___________r___      _________tb__________t__b______t___tb_b_      _____      ____x      _____      _____   
      34     0      ________________________________r_______      ________________________________________      _____      _____      _____      _____   
      36     0      __________________________________r_____      ________________________________________      _____      _____      _____      _____   
      38     0      ____________________________________r___      ________________________________________      _____      _____      _____      _____   

    top outgoing channels
    = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
    index   Mux                       ChanX                                         Chany                       OPIN_L     OPIN_R     OPIN_T     OPIN_B  
    = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
      0      12     r__l__r_____r__l_l________r__l__________      b___________b_____________b_____________      _____      _____      x____      _____   
      2      0      ________________________________________      b_______________________________________      _____      _____      _____      _____   
      4      0      ________________________________________      __b_____________________________________      _____      _____      _____      _____   
      6      0      ________________________________________      ____b___________________________________      _____      _____      _____      _____   
      8      12     _____l____r________l___lr________l__r_r_      __b_____________b___________b___________      _____      _____      _x___      _____   
      10     0      ________________________________________      ________b_______________________________      _____      _____      _____      _____   
      12     0      ________________________________________      __________b_____________________________      _____      _____      _____      _____   
      14     0      ________________________________________      ____________b___________________________      _____      _____      _____      _____   
      16     12     ________rl__________rl________rl__rl____      ____b_____________b_____________b_______      _____      _____      __x__      _____   
      18     0      ________________________________________      ________________b_______________________      _____      _____      _____      _____   
      20     0      ________________________________________      __________________b_____________________      _____      _____      _____      _____   
      22     0      ________________________________________      ____________________b___________________      _____      _____      _____      _____   
      24     12     ____r______l______r___r__l______r____l_l      ________b___________b_____________b_____      _____      _____      ___x_      _____   
      26     0      ________________________________________      ________________________b_______________      _____      _____      _____      _____   
      28     0      ________________________________________      __________________________b_____________      _____      _____      _____      _____   
      30     0      ________________________________________      ____________________________b___________      _____      _____      _____      _____   
      32     12     _lr____l_____lr_r__________lr___________      __________b_____________b___________b___      _____      _____      ____x      _____   
      34     0      ________________________________________      ________________________________b_______      _____      _____      _____      _____   
      36     0      ________________________________________      __________________________________b_____      _____      _____      _____      _____   
      38     0      ________________________________________      ____________________________________b___      _____      _____      _____      _____   

    bottom outgoing channels
    = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
    index   Mux                       ChanX                                         Chany                       OPIN_L     OPIN_R     OPIN_T     OPIN_B  
    = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = = 
      1      12     __r______l____r_r____l______r__l___l____      _t___________t_____________t____________      _____      _____      _____      x____   
      3      0      ________________________________________      _t______________________________________      _____      _____      _____      _____   
      5      0      ________________________________________      ___t____________________________________      _____      _____      _____      _____   
      7      0      ________________________________________      _____t__________________________________      _____      _____      _____      _____   
      9      12     ____rl____________rl__rl________rl______      ___t_____________t___________t__________      _____      _____      _____      _x___   
      11     0      ________________________________________      _________t______________________________      _____      _____      _____      _____   
      13     0      ________________________________________      ___________t____________________________      _____      _____      _____      _____   
      15     0      ________________________________________      _____________t__________________________      _____      _____      _____      _____   
      17     12     ___l____r______l_l__r________lr___r_____      _____t_____________t_____________t______      _____      _____      _____      __x__   
      19     0      ________________________________________      _________________t______________________      _____      _____      _____      _____   
      21     0      ________________________________________      ___________________t____________________      _____      _____      _____      _____   
      23     0      ________________________________________      _____________________t__________________      _____      _____      _____      _____   
      25     12     _l_____l__r__l__________r__l________r_r_      _________t___________t_____________t____      _____      _____      _____      ___x_   
      27     0      ________________________________________      _________________________t______________      _____      _____      _____      _____   
      29     0      ________________________________________      ___________________________t____________      _____      _____      _____      _____   
      31     0      ________________________________________      _____________________________t__________      _____      _____      _____      _____   
      33     12     r_____r____lr____________lr__________l_l      ___________t_____________t___________t__      _____      _____      _____      ____x   
      35     0      ________________________________________      _________________________________t______      _____      _____      _____      _____   
      37     0      ________________________________________      ___________________________________t____      _____      _____      _____      _____   
      39     0      ________________________________________      _____________________________________t__      _____      _____      _____      _____   






|

.. code-block:: default


    import glob
    import logging
    from os import path
    import numpy as np

    import spydrnet as sdn
    from spydrnet_physical.util import RoutingRender

    logger = logging.getLogger('spydrnet_logs')
    sdn.enable_file_logging(LOG_LEVEL='DEBUG')

    scale = 50
    SPACING = 150

    np.set_printoptions(linewidth=200)


    def main():
        proj = '../homogeneous_fabric'
        for indx, sb in enumerate(glob.glob(f'{proj}/*_Verilog/routing/sb_1__1_.v')):
            module = path.splitext(path.basename(sb))[0]

            # This creates switch-box rendering class
            sb_render = RoutingRender(module, f"{proj}/FPGA44_gsb/{module}.xml")
            # Print stats of switch box
            sb_render.get_stats(print_header=bool(indx == 0))
            # Render full switch-box and save as SVG
            sb_render.render_switch_pattern()
            sb_render.save(filename="_sb_1__1_.svg")
            sb_render.render_connection_box('left', filename="_cbx_1__1_.svg")
            sb_render.render_connection_box('top', filename="_cbx_1__2_.svg")

            # Report incoming channel information
            print("\n left incoming channels")
            sb_render.report_incoming_channels("left")
            print("\n right incoming channels")
            sb_render.report_incoming_channels("right")
            print("\n top incoming channels")
            sb_render.report_incoming_channels("top")
            print("\n bottom incoming channels")
            sb_render.report_incoming_channels("bottom")

            # Report outgoing channel information
            print("\nleft outgoing channels")
            sb_render.report_outgoing_channels("left")
            print("\nright outgoing channels")
            sb_render.report_outgoing_channels("right")
            print("\ntop outgoing channels")
            sb_render.report_outgoing_channels("top")
            print("\nbottom outgoing channels")
            sb_render.report_outgoing_channels("bottom")

            # Arbitrary Arrangement of Connection Box
            def channel_map(side, x):
                lbl = side[0].upper() + str(x)
                chan_map = ["R0", "R1", "R2", "R3",
                            "L0", "L1", "L2", "L3",
                            "R4", "R5", "R6", "R7", "", ""
                            "L4", "L5", "L6", "L7",
                            "R8", "R9",
                            "L8", "L9", ]
                if lbl in chan_map:
                    indx = chan_map.index(lbl) if lbl in chan_map else x
                    return (20-indx) if side == 'left' else indx
                else:
                    return x

            sb_render.render_connection_box(
                'top',
                pinmap=lambda x: [0,  2,  4,  6,  8,
                                  10,  12, 14,  16,  18,
                                  20, 22, 24, 26, 28,
                                  30, 32, 34, 36, 38,
                                  None, None, None, None, None,
                                  1, 3, 5, 7, 9,
                                  11, 13, 15, 17, 19,
                                  21, 23, 25, 27, 29,
                                  31, 33, 35, 37, 39].index(x),
                channel_map=channel_map,
                filename="_cbx_1__1_arrangement.svg")


    if __name__ == "__main__":
        main()


.. rst-class:: sphx-glr-timing

   **Total running time of the script:** ( 0 minutes  0.234 seconds)


.. _sphx_glr_download_auto_openfpga_rendering_render_routing_box.py:


.. only :: html

 .. container:: sphx-glr-footer
    :class: sphx-glr-footer-example



  .. container:: sphx-glr-download sphx-glr-download-python

     :download:`Download Python source code: render_routing_box.py <render_routing_box.py>`



  .. container:: sphx-glr-download sphx-glr-download-jupyter

     :download:`Download Jupyter notebook: render_routing_box.ipynb <render_routing_box.ipynb>`


.. only:: html

 .. rst-class:: sphx-glr-signature

    `Gallery generated by Sphinx-Gallery <https://sphinx-gallery.github.io>`_
